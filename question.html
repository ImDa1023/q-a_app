<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>質問フォーム</title>
    <script src="js/vue.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.6.9/firebase.js"></script>
    <script src="js/app.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <link rel="stylesheet" type="text/css" href="path/to/onsen-css-components.css">
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
</head>
<body>
  <div id="app">
    <textarea cols="40" rows="20" maxlength="800" placeholder="質問を入力"></textarea><br>
        <p>ジャンル</p>
            <ons-button @click="send_weather">天気・気温</ons-button>
            <ons-button @click="send_craze">流行</ons-button>
            <ons-button @click="send_coordination">コーディネート</ons-button>
            <ons-button @click="send_match">似合わせ</ons-button>
            <ons-button @click="send_tpo">TPO</ons-button>
            <ons-button @click="send_brand">ブランド</ons-button>
            <section style="margin: 10px;">
              <input type="file" name="photo" @change="fileChange" accept="image/*" />
              <ons-button @click="upload">アップロード</ons-button>
              <div v-if="photo_url">
                  <div class="center">
                      <img :src="photo_url" width="80%" />
                  </div>
              </div>
            </section>
          
            <template id="main">
            <v-ons-page>
            <v-ons-button @click="$ons.openActionSheet({buttons:['label1', 'label2', 'label3'], title: 'Lorem ipsum', cancelable: true, destructive: 1})">
              Dynamic action sheet
            </v-ons-button>
        
            <v-ons-button @click="actionSheetVisible = true">
              Static action sheet
            </v-ons-button>
            <div>Static sheet visible? {{actionSheetVisible}}</div>
        
            <v-ons-action-sheet
              :visible.sync="actionSheetVisible"
              cancelable
              title="Description"
            >
            <v-ons-action-sheet-button icon="md-square-o">Label 1</v-ons-action-sheet-button>
            <v-ons-action-sheet-button icon="md-square-o" modifier="destructive">Label 2</v-ons-action-sheet-button>
            <v-ons-action-sheet-button icon="md-square-o">Label 3</v-ons-action-sheet-button>
            </v-ons-action-sheet>
          </v-ons-page>
        </template>

            <ons-button>送信</ons-button>
  </div>

  <script>
    // Firebaseの初期化
    var config = {
        apiKey: "AIzaSyDiEwAVl_XvLX1LmV4S-ul3PH_6IauIFYY",
        authDomain: "AUTH_DOMAIN",
        databaseURL: "DATABASE_URL",
        projectId: "fashionapp-3397e",
        storageBucket: "STORAGE_BUCKET",
        messagingSenderId: "MESSAGING_SENDER_ID"
    };
    firebase.initializeApp(config);

    new Vue({
    el:'#app',
    data(){
      return {
      actionSheetVisible: false,
      //写真のアップロード
      photo: null,
      photo_url: null
    }
    },
    // ファイルを指定した時の処理
    fileChange: function(e) {
      this.photo = e.target.files[0];
    },
    // 画像アップロード処理
    upload: function() {
        var me = this;
        // ストレージオブジェクト作成
        var storageRef = firebase.storage().ref();
        // ファイルのパスを設定
        var mountainsRef = storageRef.child(`images/${this.photo.name}`);
        // ファイルを適用してファイルアップロード開始
        var uploadTask = mountainsRef.put(this.photo);
        // ステータスを監視
        uploadTask.on('state_changed', function(snapshot){
        }, function(err) {
            console.log(err);
        }, function() {
            // アップロード完了したら画像のURLを取得
            me.photo_url = uploadTask.snapshot.downloadURL;
        })
    }
  })

      export class AppComponent {
      animation: string = 'default';

        constructor() {
        }

        showActionSheet() {
          ons.openActionSheet({
            title: 'Dynamic action sheet',
            cancelable: true,
            buttons: [
              'Label 0',
              'Label 1',
              {
                label: 'Label 2',
                modifier: 'destructive'
              },
              {
                label: 'Cancel',
                icon: 'md-close'
              }
            ],
            animation: this.animation,
          });
        }
      }

      @NgModule({
        imports: [OnsenModule],
        declarations: [AppComponent],
        bootstrap: [AppComponent],
        schemas: [CUSTOM_ELEMENTS_SCHEMA]
      })
      class AppModule { }

      platformBrowserDynamic().bootstrapModule(AppModule);
  </script>
​
</body>
</html>

